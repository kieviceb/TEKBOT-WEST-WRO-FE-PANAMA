# TEKBOT WEST's readme <img src="https://upload.wikimedia.org/wikipedia/commons/a/ab/Flag_of_Panama.svg" alt="Bandera de Panamá" width="30"/>

<p align="center">
  <img src="https://github.com/user-attachments/assets/be75ac88-018e-48ce-b09f-6da08b648245" alt="TEKBOT (1)">
</p>

[![Instagram](https://img.shields.io/badge/Instagram-%23E9805F.svg?style=for-the-badge&logo=Instagram&logoColor=white)](https://www.instagram.com/tekbot_lab?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==)
[![Facebook](https://img.shields.io/badge/YouTube-%23E4445F.svg?style=for-the-badge&logo=Youtube&logoColor=white)](https://www.youtube.com/@TEKBOT_LAB)

This is the official repository for TEKBOT WEST, the team participating in the Panama WRO Regional phase to compete for a spot on the national team. Here you'll find everything related to the development of our robot as we strive towards the national and international finals!


# Repo's folder structure
```
📦 TEKBOT-WEST-WRO-FE
├── 📁 3D_printables # 3D models ready for printing robot components
├── 📁 schemes # Wiring and schematic diagram
├── 📁 src # Source code for robot control and challenge algorithms
├── 📁 team photos # Photos of the team 
├── 📁 vehicle photos # Pictures of the robot at different views
├── 📁 video # Video of testing competition runs
├── 📄 README.md # Main project documentation and overview
```
---
  
## Meet the team 👨‍💻
<p align="center">
  <img src="https://github.com/user-attachments/assets/bbfb9286-652d-4064-b1f4-a33967fa7d1e" width="700">
</p>

## 👤 Luis Hidalgo  
### Age: 16  
Luis is the team’s **electrician and hardware specialist**. He handles wiring, sensors, and all things related to power and circuitry. Luis brings hands-on experience from previous **WRO competitions**, contributing to the robot's reliability and performance.

## 👩‍💻 Ericka Ceballos  
### Age: 18  
Ericka is the team’s **programmer**, responsible for writing and debugging the robot's code. She ensures that the robot can make real-time decisions and execute tasks with precision. Ericka has participated in **WRO** and brings her technical and problem-solving skills to every challenge.

## 🎨 Patrick Sutherland  
### Age: 17  
Patrick serves as the **designer** of the team. He focuses on the mechanical layout and overall functionality of the robot, balancing creativity with engineering. Patrick is also a returning **WRO participant**, constantly improving the robot's design through testing and iteration.

## 🧠 Our Coach — Diego Delgado  
### Age: 25  
Diego is the team’s **coach and mentor**, guiding the team through strategy, planning, and technical reviews. He is the **founder of Tekbot**, an organization dedicated to promoting STEM and robotics education for children and young people. Diego is a **former WRO participant** himself and has also coached teams in **FRC**, offering a broad perspective and deep expertise in robotics education.

---
## Vehicle Photos 📸

| Front           | Right       | Back      |
|:---------------:|:-----------:|:---------:|
| <img width="270" alt="front" src="https://github.com/user-attachments/assets/52ef1eb8-44c9-489f-9020-e1c41df86249"> |<img width="270" alt="front" src="https://github.com/user-attachments/assets/0d997b9a-8e08-4761-a76c-a5333d2de223"> |  <img width="270" alt="front" src="https://github.com/user-attachments/assets/6c593234-e3ec-4686-a9a8-bdd1bfbeefac"> |
| Left          | Top       | Bottom     |
|<img width="270" alt="front" src="https://github.com/user-attachments/assets/b835d64c-79fb-4abb-b9a4-92445bec3d5b">| <img width="270" alt="front" src="https://github.com/user-attachments/assets/837ce766-5ce4-4726-8e1b-41b85ca31dbd"> | <img width="270" alt="front" src="https://github.com/user-attachments/assets/db67a2cb-4798-4c9f-8c6b-0a57b5aee964">|

<br>
 <br>

# Components 🧱
A list of all the electrical and mechanical components on the robot.

| <img src="https://github.com/user-attachments/assets/719a51d8-4b14-402d-a462-ba1e4b071c2c" alt="Alt 1" width="200"/> | <img src="https://github.com/user-attachments/assets/3641b928-34c5-4d97-861c-fa08d40c9faa" alt="Alt 1" width="200"/> | <img src="https://github.com/user-attachments/assets/19b0baad-f049-460a-b44f-da65eaff72fe" alt="Alt 1" width="200"/> | 
| :------------: |:-------------:| :------------:|
|[Raspberry Pi 5 - 8GB RAM x1](https://store-usa.arduino.cc/products/arduino-nano?srsltid=AfmBOooU4-IrktQwXymxJgaV7MZPj3cBWDjg6AjQwBmYoQw8es2bz9ex)|[Microsoft LifeCam HD-3000 x1](https://a.co/d/42jYlB6)|[TB6612 motor driver x1](https://a.co/d/fpJSHg1)|
| <img src="https://github.com/user-attachments/assets/5b0ffc5d-ce02-4620-9849-15fdce566702" width="200"/> | <img src="https://github.com/user-attachments/assets/d4170adc-23b9-446f-bac0-1c50b966e00f" alt="Alt 1" width="200"/> | <img src="https://github.com/user-attachments/assets/b9cfe245-e774-4e4c-aed9-0e2c7445bf3c" alt="Alt 1" width="200"/> |
| [Arduino NANO RP2040 x1](https://a.co/d/9mUTqVe) |[FUNDUINO kit chassis x1](https://a.co/d/fpJSHg1)|[INIU Slim 10,000mAh Power Bank x1](https://a.co/d/1patlqb) |
| <img src="https://github.com/user-attachments/assets/0be65d89-2a79-418d-86e4-e2d6fee2a532" width="200"/> |<img src="https://github.com/user-attachments/assets/77157511-58ff-4ee8-9977-d3b53d906af6" alt="Alt 1" width="200"/>| <img src="https://github.com/user-attachments/assets/86d8bf70-708b-426f-896a-9283a74d13df" alt="Alt 1" width="200"/> |
|[Geekworm Raspberry Pi Wide Input Voltage Power Management x1](https://www.pololu.com/product/4863)|[MG996R High Torque Metal Gear Servo x1](https://a.co/d/cRVAc0u)|[STEREN Li-ion 2800 mAh Rechargeable Battery x2](https://www.steren.com.pa/bateria-recargable-li-ion-2800-mah-tipo-18650-1.html)|

---

# Future Engineers Challenge Overview

The **WRO 2025 Future Engineers challenge** challenges teams to design and build a fully autonomous robot capable of navigating a dynamic and randomized racetrack. Using a combination of sensors, computer vision, and advanced control algorithms, the robot must adapt to changing obstacles, follow predefined driving rules, and demonstrate precise maneuvering skills.

### 📌 Competition Format

- **🏁 Open Challenge:**  
  The robot must complete **three (3) laps** around a track where obstacles and track elements are randomly placed, requiring real-time adaptation.

- **🚦 Obstacle Challenge:**  
  The robot must detect and respond correctly to randomly positioned colored markers:  
  - 🟥 **Red signs** → Robot must drive on the right side of the lane.  
  - 🟩 **Green signs** → Robot must drive on the left side of the lane.

  After completing the laps, the robot must find a designated parking zone and perform a precise **parallel parking maneuver** within a confined space, adding an additional technical challenge.

### 📑 Documentation Requirements

Each team is required to maintain a **public GitHub repository** documenting their engineering design process, technical decisions, robot design, and source code. This encourages transparency, collaboration, and learning within the robotics community.

### 🏆 Scoring & Evaluation

Teams are evaluated based on their robot’s **accuracy**, **speed**, and the quality of their **technical documentation**. Points are awarded to teams that effectively balance performance, adaptability to randomized conditions, and innovation in their approach. This challenge promotes not only technical skills in robotics and programming but also problem-solving, teamwork, and creative engineering.

---


> [!NOTE]
> For detailed rules and regulations (PANAMA ONLY), please refer to the official WRO Panama 2025 Future Engineers document:  
> [WRO 2025 Future Engineers Rules (PDF)](https://fundesteam.nyc3.cdn.digitaloceanspaces.com/FutureEngineers/WRO-2025-FE-Reglas%20Generales.pdf)

<br>


# ⚙️ Mobility Management

Our robot's mobility system is divided into two main components: **movement** and **steering**.

### Movement
The robot uses a **DC motor** mounted at the rear, connected to a **shared rear axle** via a mechanical linkage. This ensures both rear wheels rotate together, complying with WRO rules. The motor shaft (D-shaft) is securely coupled to the axle for efficient torque transfer.

The motor is controlled by an **L298N motor driver**, which is connected directly to the **Raspberry Pi**. This allows the Pi to manage motor speed and direction based on real-time vision processing.

### Steering
For steering, we use the **MG996R metal gear servo motor**, known for its high torque and precision. The robot employs an **Ackermann steering system**, included in the Funduino kit, which mimics real vehicle steering geometry for smoother and more accurate turns.

The **Arduino Nano RP2040** receives steering commands from the Raspberry Pi and controls the servo motor accordingly.

---

# 🔋 Power Management

Our robot uses a dual power system to efficiently manage energy distribution:

- A **power bank** supplies power to the **Raspberry Pi**, the **Microsoft LifeCam HD-3000 webcam**, and the **DC motor** (via the L298N driver). This ensures stable voltage and current for the SBC (Single Board Computer) and high-power components.
  
- A set of **3.7V Flat Top Lithium Rechargeable Batteries** powers the **Arduino Nano RP2040** and the **MG996R servo motor**. This separation helps prevent voltage drops and ensures reliable operation of the control and actuation systems.

We are planning to replace the power bank with the **Geekworm Raspberry Pi Wide Input Voltage Power Management Module**, which will allow us to:

- Power the Raspberry Pi and camera directly from the 3.7V lithium batteries.
- Provide regulated and protected power delivery to the SBC.
- Reduce weight and improve cable management by eliminating the external power bank.

This upgrade will result in a more compact, efficient, and reliable power system.

---

# 👁️ Sense and Object Detection

Our robot uses **computer vision** to perceive its environment and make autonomous decisions.

### Vision System
We use the **Microsoft LifeCam HD-3000** webcam in combination with **OpenCV (Open Source Computer Vision Library)**, a powerful toolkit for real-time image processing. All image processing is handled on the **Raspberry Pi**, which interprets the camera feed and:

- Sends **steering commands** to the **Arduino Nano RP2040**, which controls the MG996R servo motor.
- Directly controls the **DC motor** through the **L298N motor driver**.

This setup enables the robot to:

- Detect and avoid **black walls** on the track.
- Identify and avoid **obstacles**, including **red and green blocks**.
- Recognize the **magenta parking spot** and perform parking maneuvers.
- Count **orange and blue lines** on the mat to track laps (3 total), ensuring compliance with lap-counting requirements.


# Challenge Strategies

## Open Challenge Strategy

The Open Challenge focuses on detecting colored lines—specifically **orange** and **blue**—on the floor and reacting by steering the robot accordingly:

- The camera captures a Region of Interest (ROI) near the floor to detect these colored lines.
- HSV color filtering isolates orange and blue colors in the ROI.
- When an orange line is detected, the robot commands the servo to turn **120° to the right** and temporarily increases motor speed.
- When a blue line is detected, the robot commands the servo to turn **58° to the left** and also increases motor speed.
- If no colored line is detected, the servo centers at **90°**, and the robot moves at a default speed.
- Turns last for a fixed duration (~1.3 seconds), after which the servo returns to center and speed reduces to default.
- Visual feedback is provided via OpenCV windows showing the camera feed and detected masks.
- The motor is continuously driven forward except when stopping is needed.
- This strategy allows the robot to smoothly follow colored paths by combining real-time color detection with timed servo steering commands.

## Obstacle Challenge Strategy

The Obstacle Challenge code relies on detecting colored blocks—**red** and **green**—using the camera, and responding with precise servo movements to avoid collisions:

- The camera captures a region (ROI) where colored blocks appear.
- HSV filtering identifies red and green blocks.
- The program calculates the position (center X coordinate) and size (pixel area) of these blocks.
- When a red block is detected with enough size, the robot initiates a **right turn** by commanding the servo to angle **120°**.
- When a green block is detected, it initiates a **left turn** with servo angle **58°**.
- The robot **continues to turn until each block moves past a predefined horizontal limit** (an X-coordinate on the frame), ensuring the block is completely avoided before resuming a straight path.  <img src="https://github.com/user-attachments/assets/7b70ce4a-0ba3-4e91-924a-d9df1eb91ae7" alt="Example image" width="300" />
- Turning state (`girando`) tracks if the robot is currently turning to prevent conflicting commands.           
- The robot uses a black line detection ROI to keep track of the floor line and assist navigation while turning.
- Yellow lines are detected to count how many have been crossed; the robot stops after detecting **12** yellow lines, indicating the end of the course.
- The servo command is sent as an angle string to the Arduino, which moves the servo accordingly.
- The motor moves forward continuously unless stopped by the yellow line count condition.
- The system uses visual markers and debug prints for easy monitoring.

This obstacle avoidance strategy combines color-based object detection with line following and a servo-actuated steering system to navigate safely and complete the obstacle course.


---

Stay tuned for updates as we continue to improve our robot's performance and capabilities!

# References
https://www.matthewpeterkelly.com/tutorials/pdControl/index.html#:~:text=A%20proportional%2Dderivative%20(PD),car%20at%20some%20desired%20height
https://nerdvana.ro/wro-fe/

## 📜 License

MIT License

Copyright (c) 2025 Ericka Ceballos

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.


